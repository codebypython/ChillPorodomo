# Hướng Dẫn Sử Dụng ChillPomodoro - Phiên Bản Mới

## Tổng Quan

ChillPomodoro đã được tái cấu trúc hoàn toàn để tối ưu hiệu suất, đặc biệt trên mobile. Các tính năng giờ đây hoạt động **độc lập** với nhau, giúp ứng dụng mượt mà hơn và không bị crash.

## Các Tính Năng Chính

### 1. Timer (Đồng Hồ Đếm Ngược)

- **Bắt đầu**: Bấm nút "Bắt đầu" để khởi động timer
- **Tạm dừng**: Bấm nút "Tạm dừng" để tạm dừng
- **Tiếp tục**: Bấm lại "Bắt đầu" để tiếp tục - đồng hồ sẽ **KHÔNG bị refresh**
- **Đặt lại**: Bấm nút "Đặt lại" để reset về thời gian ban đầu

> **Quan trọng**: Timer hoạt động độc lập với âm thanh và background. Bạn có thể start/pause timer mà không ảnh hưởng đến nhạc hoặc video đang phát.

### 2. Âm Thanh

#### a. Chọn Âm Thanh (Icon Nốt Nhạc 🎵)

- Bấm nút **"Chọn nhạc"** để mở panel chọn âm thanh
- Thêm nhiều track âm thanh bằng nút **"+ Thêm"**
- Chọn loại: **Đơn** (single sound) hoặc **Preset** (nhiều sound)
- Xóa track không cần bằng nút **X**

#### b. Phát/Tắt Âm Thanh (Icon Loa 🔊)

- Bấm nút **"Phát nhạc"** để bật tất cả âm thanh đã chọn
- Bấm lại để tắt
- Âm thanh sẽ **tự động lặp lại vô hạn** (auto-loop)
- **Độc lập với timer**: Timer có thể pause nhưng nhạc vẫn phát

#### c. Điều Chỉnh Âm Lượng (Icon Bánh Răng ⚙️)

- Bấm nút **"Âm lượng"** để mở panel điều chỉnh
- Kéo thanh trượt để thay đổi âm lượng từng track
- **Áp dụng ngay lập tức** - không cần pause/play lại
- Chỉ hiện khi đang phát nhạc

### 3. Background/Video

#### a. Chọn Background (Icon Ảnh 🖼️)

- Bấm nút **"Background"** để mở panel chọn
- Chọn từ danh sách ảnh/GIF/video có sẵn
- Chọn chế độ hiển thị:
  - **Xem trọn vẹn (Fit)**: Hiển thị toàn bộ nội dung, có viền đen nếu tỷ lệ không khớp
  - **Full màn hình (Fill)**: Phủ đầy màn hình, có thể cắt bớt nội dung

#### b. Bật/Tắt Background (Icon Film 🎬)

- Bấm nút **"Xem BG"** để bật background/video
- Background sẽ hiển thị **trên một lớp riêng**, chiếm toàn màn hình
- Video sẽ **tự động lặp lại vô hạn** (auto-loop)
- **Độc lập hoàn toàn** với timer và âm thanh

### 4. Chế Độ Xem Background/Video

Khi đã bật background (nút "Xem BG"), bạn có 2 chế độ:

#### a. Chế Độ Normal (Có UI)

- Hiển thị background + nút "Thoát chế độ xem background" ở góc trên phải
- Bấm nút này để tắt background và quay về giao diện chính

#### b. Chế Độ Ẩn UI (Chỉ Xem Background)

- Bấm nút **"Ẩn UI"** (Icon mắt 👁️) để ẩn toàn bộ giao diện
- Chỉ còn lại background/video toàn màn hình
- Xuất hiện các nút floating ở góc phải:
  - **Mắt**: Hiện lại giao diện (hoặc bấm ESC)
  - **Đồng hồ**: Bật/tắt hiển thị timer giữa màn hình
  - **Resize**: Chuyển đổi chế độ Fit/Fill

> **Tối ưu cho Mobile**: Chế độ này giúp bạn xem video toàn màn hình mà không bị che khuất bởi thanh tìm kiếm của trình duyệt. Bạn có thể chạm vào màn hình mà không lo kích hoạt các nút không mong muốn.

### 5. Cài Đặt Thời Gian

- **Thời gian làm việc**: 15, 25, 30, 45, 60, 90 phút
- **Thời gian nghỉ**: 5, 10, 15, 20, 30 phút
- Chỉ thay đổi được khi timer không đang chạy

### 6. Quản Lý Session

#### Lưu Session

- Bấm **"Lưu Session"**
- Nhập tên session
- Lưu toàn bộ cài đặt: background, âm thanh, thời gian

#### Tải Session

- Bấm **"Tải Session"**
- Chọn session đã lưu
- Tất cả cài đặt sẽ được khôi phục

## Luồng Sử Dụng Đề Xuất

### Workflow 1: Tập Trung Làm Việc Với Nhạc

1. **Chọn âm thanh**: Bấm "Chọn nhạc" → chọn sound/preset
2. **Phát nhạc**: Bấm "Phát nhạc" 🔊
3. **Điều chỉnh âm lượng**: Bấm "Âm lượng" ⚙️ → kéo thanh trượt
4. **Bắt đầu làm việc**: Bấm "Bắt đầu" timer

### Workflow 2: Xem Video + Nghe Nhạc

1. **Chọn background**: Bấm "Background" → chọn video
2. **Chọn âm thanh**: Bấm "Chọn nhạc" → chọn sound
3. **Phát nhạc**: Bấm "Phát nhạc" 🔊
4. **Xem video**: Bấm "Xem BG" 🎬
5. **Ẩn UI để tập trung**: Bấm "Ẩn UI" 👁️
6. **Bắt đầu timer**: Bấm "Bắt đầu" (nếu muốn)

### Workflow 3: Chỉ Xem Video Thư Giãn

1. **Chọn background**: Bấm "Background" → chọn video/ảnh
2. **Xem video**: Bấm "Xem BG" 🎬
3. **Ẩn UI**: Bấm "Ẩn UI" 👁️
4. **Thư giãn**: Ngồi thư giãn, không cần timer hay nhạc

## Ưu Điểm So Với Phiên Bản Cũ

### ✅ Hiệu Suất

- **Không còn crash trên mobile**: Các tính năng hoạt động độc lập
- **Tải nhanh hơn**: Lazy loading cho audio và video
- **Mượt mà hơn**: Tối ưu render và memory management

### ✅ Linh Hoạt

- **Timer độc lập**: Pause/start không ảnh hưởng nhạc/video
- **Âm thanh độc lập**: Bật/tắt không cần start timer
- **Video độc lập**: Xem video mà không cần timer/nhạc

### ✅ Trải Nghiệm Mobile

- **Video toàn màn hình**: Không bị che bởi thanh tìm kiếm
- **Chống chạm nhầm**: Ẩn UI để tránh kích hoạt nút không mong muốn
- **Tự động lặp**: Video và audio tự động replay
- **Safe area**: Hỗ trợ đầy đủ notch và safe area trên iPhone

### ✅ Điều Khiển Realtime

- **Điều chỉnh âm lượng ngay**: Không cần pause/play
- **Thay đổi chế độ hiển thị ngay**: Fit/Fill mượt mà
- **Responsive**: Giao diện tự động điều chỉnh theo màn hình

## Phím Tắt

- **ESC**: Ẩn/hiện UI khi đang xem background
- Các nút floating luôn có sẵn khi ẩn UI

## Tips & Tricks

1. **Tối ưu battery trên mobile**:

   - Chỉ bật video khi thực sự cần
   - Tắt background khi không xem để tiết kiệm pin

2. **Làm việc tập trung**:

   - Chỉ bật nhạc, không bật video
   - Hoặc bật video nhưng ẩn UI và tắt hiển thị timer

3. **Thư giãn**:

   - Bật video + nhạc lofi
   - Ẩn UI, chỉ để video chạy
   - Không cần bật timer

4. **Pomodoro chuẩn**:
   - Cài 25 phút work, 5 phút break
   - Bật nhạc trước
   - Start timer sau

## Lưu Ý

- **Auto-loop**: Video và audio đều tự động lặp lại vô hạn
- **Memory**: Nên tắt video/nhạc khi không dùng để giải phóng RAM
- **Multiple tracks**: Có thể phát nhiều track âm thanh cùng lúc
- **Session**: Lưu session để không phải cài đặt lại mỗi lần

## Khắc Phục Sự Cố

### Video không phát

- Kiểm tra định dạng video (nên dùng MP4)
- Thử chuyển sang chế độ Fill
- Bấm vào màn hình để kích hoạt video (iOS)

### Nhạc không phát

- Kiểm tra đã chọn sound/preset chưa
- Bấm nút "Phát nhạc" 🔊
- Kiểm tra âm lượng thiết bị

### App chậm/giật

- Tắt video khi không cần
- Giảm số lượng audio track
- Tắt background blur (chọn chế độ Fill)

---

**Phát triển bởi**: ChillPomodoro Team
**Phiên bản**: 2.7.0 - Tái Cấu Trúc Hiệu Suất
